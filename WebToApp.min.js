class WebToApp{constructor(e,t,a){this.data=e,this.fileName=t,this.mimeType=a,"string"==typeof this.data||this.data instanceof String?this.stringToArrayBuffer(this.data,"UTF-8",this.download):this.download()}download(){try{var e={filename:this.fileName,fileContent:this.arrayBufferToBase64(this.data)};window.webkit.messageHandlers.webToApp.postMessage(e)}catch(e){console.log("WEBTOAPP_FILENAME="+this.fileName);var t=new Blob([this.data],{type:this.mimeType}),a=window.URL.createObjectURL(t);this.download_URL(a)}}download_URL(e){var t;(t=document.createElement("a")).href=e,t.download=this.fileName,document.body.appendChild(t),t.style="display: none",t.click(),t.remove()}arrayBufferToBase64(e){for(var t="",a=new Uint8Array(e),o=a.byteLength,i=0;i<o;i++)t+=String.fromCharCode(a[i]);return window.btoa(t)}stringToArrayBuffer(e,t,a){var o=this,i=new Blob([e],{type:"text/plain;charset="+t}),r=new FileReader;r.onload=function(e){o.download(e.target.result,o.fileName,o.mimeType)},r.readAsArrayBuffer(i)}}