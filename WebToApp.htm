<!DOCTYPE html>
<html lang="en">
	<head>
		<title>WebToApp Demo</title>
		<meta charset="UTF-8"/>
	</head>
	<body>
		<input type="file" onchange="readingAFile(event.target.files);" /><br /><br />
		<input type="button" value="CLICK ME TO DOWNLOAD THE UPLOADED FILE TO YOUR DEVICE" onclick="downloadFile()"/>
		<script>
			// WebToApp.min.js
			class WebToApp{constructor(e,o,a){try{var r={filename:o,fileContent:this.arrayBufferToBase64(e)};window.webkit.messageHandlers.webToApp.postMessage(r)}catch(r){console.log("WEBTOAPP_FILENAME="+o);var n=new Blob([e],{type:a}),t=window.URL.createObjectURL(n);this.download_URL(t,o)}}download_URL(e,o){var a;(a=document.createElement("a")).href=e,a.download=o,document.body.appendChild(a),a.style="display: none",a.click(),a.remove()}arrayBufferToBase64(e){for(var o="",a=new Uint8Array(e),r=a.byteLength,n=0;n<r;n++)o+=String.fromCharCode(a[n]);return window.btoa(o)}}

			var myFileContent;
			var myFilename;

			function readingAFile(files)
				{
				var filereader = new FileReader();
				filereader.file_name = files[0].name;
				filereader.onload = function()
					{
					myFileContent = this.result;
					myFilename = files[0].name;
					};
				filereader.readAsArrayBuffer(files[0]);
				}

			function downloadFile()
				{
				new WebToApp(myFileContent, myFilename, "application/octet-stream");
				}
		</script>
	</body>
</html>